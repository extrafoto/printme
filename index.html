<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print me a card</title>
    <style>
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #4BC8C7;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        .container {
            text-align: center;
            width: 90%;
            max-width: 600px;
        }

        .title {
            background-color: white;
            padding: 20px 20px;
            border-radius: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        #text-input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            box-sizing: border-box;
        }

        #cardCanvas {
            background-color: white;
            border-radius: 20px;
            width: 100%;
            max-width: 1080px;
            height: auto;
        }

        .buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
        }

        .btn img {
            width: 40px;
            height: 40px;
            margin-right: 8px;
        }

        .color-picker {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .color-picker div {
            display: flex;
            align-items: center;
        }

        .color-picker input {
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 18px;
            }

            #text-input {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">Print me a card</div>
        <textarea id="text-input" placeholder="Digite sua frase aqui"></textarea>
        <canvas id="cardCanvas" width="1080" height="1350"></canvas>

        <div class="color-picker">
            <div>
                <label for="bg-color">Cor do Fundo:</label>
                <input type="color" id="bg-color" value="#FFFFFF">
            </div>
            <div>
                <label for="text-color">Cor do Texto:</label>
                <input type="color" id="text-color" value="#000000">
            </div>
        </div>

        <div class="buttons">
            <button class="btn" onclick="generateCard()">
                <img src="https://cdn-icons-png.flaticon.com/512/60/60525.png" alt="Gerar Card">
                Gerar
            </button>
            <button class="btn" onclick="downloadCard()">
                <img src="https://cdn-icons-png.flaticon.com/512/61/61122.png" alt="Salvar Card">
                Salvar
            </button>
            <button class="btn" onclick="clearCanvas()">
                <img src="https://cdn-icons-png.flaticon.com/512/1828/1828665.png" alt="Limpar Card">
                Limpar
            </button>
        </div>
    </div>

    <script>
        // Função para gerar o card
        function generateCard() {
            const text = document.getElementById("text-input").value;
            const bgColor = document.getElementById("bg-color").value;
            const textColor = document.getElementById("text-color").value;

            const canvas = document.getElementById("cardCanvas");
            const ctx = canvas.getContext("2d");

            // Limpar o canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Definir cor de fundo
            ctx.fillStyle = bgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Estilo de texto
            let fontSize = 60; // Tamanho inicial da fonte
            ctx.font = `bold ${fontSize}px Courier New`;
            ctx.textAlign = "center";
            ctx.fillStyle = textColor;

            // Quebra o texto se necessário para caber no canvas
            const maxWidth = canvas.width - 100; // Margem de 50px em cada lado
            const lineHeight = fontSize * 1.2;

            const words = text.split(" ");
            let lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                const word = words[i];
                const width = ctx.measureText(currentLine + " " + word).width;
                if (width < maxWidth) {
                    currentLine += " " + word;
                } else {
                    lines.push(currentLine);
                    currentLine = word;
                }
            }
            lines.push(currentLine);

            // Centralizar o texto no canvas
            const yStart = (canvas.height - (lines.length * lineHeight)) / 2;

            lines.forEach((line, index) => {
                ctx.fillText(line, canvas.width / 2, yStart + (index * lineHeight));
            });
        }

        // Função para baixar o card como imagem PNG
        function downloadCard() {
            const canvas = document.getElementById("cardCanvas");
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            link.download = 'card.png';
            link.click();
        }

        // Função para limpar o canvas
        function clearCanvas() {
            const canvas = document.getElementById("cardCanvas");
            const ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
    </script>
</body>
</html>
